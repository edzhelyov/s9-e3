%html
  %head
    %title Circuits builder
    %link{:href => '/circuit.css', :type => 'text/css', :rel => 'stylesheet'}
    %script{:src => '/jquery-1.6.2.min.js', :type => 'text/javascript'}
    %script{:src => '/jquery-ui-1.8.16.custom.min.js', :type => 'text/javascript'}
    %script{:src => '/circuit.js', :type => 'text/javascript'}
  %body
    %form{:action => '/save', :method => :post, :id => :save}
      %input{:type => :submit, :value => 'Save'}
    #board
      - if @circuit
        = @circuit
      - else
        :plain
          <svg id="circuit" contentScriptType="text/ecmascript" width="100%" xmlns:xlink="http://www.w3.org/1999/xlink" zoomAndPan="magnify" contentStyleType="text/css" height="100%" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" version="1.0"><rect fill="black" x="0" width="100%" height="100%" y="0"/></svg>
    #primitives
      - @primitives.each do |primitive|
        .primitive= primitive.to_svg
    .clear
